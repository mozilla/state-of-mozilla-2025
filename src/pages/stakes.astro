---
import { Image } from "astro:assets";
import Layout from "../layouts/Layout.astro";
import Captcha from "../components/Captcha.svelte";
import Svg from "../components/Svg.svelte";
import ProgressWatcher from "../components/ProgressWatcher.svelte";
import ProgressCard from "../components/ProgressCard.svelte";
import dotsBig from "../assets/img/dots-big.png";
---

<script is:inline>
  // Restore selection immediately before DOM renders to prevent flicker
  (function () {
    var stored = localStorage.getItem("stakesSelection");
    if (stored === "a") {
      document.documentElement.classList.add("stakes-a");
    } else if (stored === "b") {
      document.documentElement.classList.add("stakes-b");
    }
  })();
</script>

<Layout>
  <Captcha client:load />

  <section
    class="relative p-2.5 lg:p-5 min-h-[calc(50svh-var(--header-height)-20px)] lg:min-h-[calc(100svh-var(--header-height)-20px)] bg-yellow"
  >
    <Image class="absolute bottom-0 left-0 right-0" src={dotsBig} alt="" />
    <div
      class="absolute max-lg:w-1/2 right-0 lg:right-5 max-lg:bottom-2.5 lg:top-1/2 lg:-translate-y-full"
    >
      <Svg client:load src="/svg/stakes.svg" class="w-full h-full" />
    </div>
    <div class="relative">
      <p class="mb-2.5 lg:mb-5">I - The Stakes</p>
      <h1 class="text-7xl lg:text-9xl uppercase">
        Which future will
        <br class="max-lg:hidden" />
        you choose?
      </h1>
    </div>
  </section>

  <section class="p-2.5 lg:p-5">
    <div class="grid lg:grid-cols-4 gap-2.5 lg:gap-5">
      <div class="lg:col-span-2 lg:col-start-2 space-y-2.5 lg:space-y-5">
        <p>
          AI isn't just another tech trend. It’s become the beating heart of
          most apps, tools and technology we use today. We're gaining incredible
          capabilities: natural language interaction with computers, automation
          of mundane tasks, creative collaboration tools, and accessibility
          breakthroughs that were impossible just years ago.
        </p>
        <p>
          But as much promise as these innovations hold, we’re at a crossroads.
          Will this technology benefit everyone? Or will it be exploited and
          centrally controlled through monopolization? Will AI be great, and
          give us the delightful and transformational experiences we’re hoping
          for? Or will it be a terrible, extractive or even dangerous pile of
          slop?
        </p>
        <p>
          <strong>
            What if developers, activists, researchers, founders and investors
            joined forces to build something different? What if we proved that a
            different economic model could win?
          </strong>
          It wasn't just idealism that broke Microsoft's stranglehold over the web
          —it was innovation; experimentation; participation; and a rebel alliance
          of programmers, developers, activists, investors and coders who built something
          new, together.
        </p>
        <p><em>It’s up to us to decide.</em></p>
      </div>
    </div>
  </section>

  <section class="p-2.5 lg:p-5 space-y-2.5 lg:space-y-5">
    <div class="marquee bg-black text-white text-xl -mx-2.5 lg:-mx-5">
      <ul class="marquee__content">
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
      </ul>
      <ul aria-hidden="true" class="marquee__content">
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
      </ul>
    </div>
    <p class="text-center border-y border-black py-2.5">TWO FUTURES</p>
    <div class="grid grid-cols-2 lg:gap-2.5">
      <div class="space-y-2.5 lg:space-y-5">
        <button
          data-selection="a"
          class="future-toggle future-toggle-a relative aspect-square w-full flex justify-center items-center outline outline-dashed cursor-pointer bg-yellow hover:bg-black hover:text-yellow"
        >
          <div class="absolute inset-0 w-full h-full overflow-hidden">
            <Svg
              client:load
              src="/svg/dots.svg"
              class="absolute left-1/2 top-1/2 -translate-1/2 w-[200%] h-[200%] object-cover"
            />
          </div>
          <span class="text-9xl">A</span>
        </button>
      </div>
      <div class="space-y-2.5 lg:space-y-5">
        <button
          data-selection="b"
          class="future-toggle future-toggle-b relative aspect-square w-full flex justify-center items-center outline outline-dashed cursor-pointer bg-yellow hover:bg-black hover:text-yellow"
        >
          <div class="absolute inset-0 w-full h-full overflow-hidden">
            <Svg
              client:load
              src="/svg/dots.svg"
              class="absolute left-1/2 top-1/2 -translate-1/2 w-[200%] h-[200%] object-cover"
            />
          </div>
          <span class="text-9xl">B</span>
        </button>
      </div>
    </div>
    <div class="grid lg:grid-cols-2 lg:gap-2.5">
      <div class="future-a space-y-2.5 lg:space-y-5 lg:col-start-1">
        <p class="border-y border-black py-2.5">CLOSED AND EXTRACTIVE</p>
        <p>
          Monopolies, concentration, and slop. A future where a few corporations
          decide how billions of people learn, create, and see the world.
        </p>
        <div>
          <div class="aspect-square w-full bg-gray-500"></div>
          <p>CLOSED AND EXTRACTIVE</p>
        </div>
      </div>
      <div class="future-b space-y-2.5 lg:space-y-5 lg:col-start-2">
        <p class="border-y border-black py-2.5">OPEN AND HUMAN-FIRST</p>
        <p>
          An internet built on human agency and choice. Technology that empowers
          creativity, protects privacy, and benefits everyone.
        </p>
        <div>
          <div class="aspect-square w-full bg-gray-500"></div>
          <p>OPEN AND HUMAN-FIRST</p>
        </div>
      </div>
    </div>
  </section>

  <section class="future-section p-2.5 lg:p-5 space-y-5 space-y-10">
    <div class="future-a space-y-2.5 lg:space-y-5">
      <div class="relative overflow-hidden pb-10 lg:pb-20">
        <Svg
          client:load
          src="/svg/dots.svg"
          class="absolute left-0 right-0 top-1/2 -translate-y-1/2 w-full object-cover"
        />
        <h2 class="font-tuoi-tre text-5xl lg:text-7xl">
          Monopolies, concentration, and slop.
        </h2>
      </div>
      <div class="grid lg:grid-cols-2 gap-2.5 lg:gap-5">
        <div class="lg:col-start-1 space-y-2.5 lg:space-y-5">
          <p>
            Twenty five years ago, when Microsoft controlled 95% of browsers,
            they controlled how people accessed information, who could build
            what, and on what terms. Mozilla was born to end that stranglehold,
            challenging other browsers dominance and shocking the world when we
            won the fight to guard the open nature of the internet. That remains
            our north star today.
          </p>
          <p>
            But today's AI concentration is far more insidious. Right now,
            OpenAI, Microsoft, Anthropic, Google, Meta, Amazon, Apple, and
            Nvidia are vying for control of the full stack that will underpin
            our shared future —hardware, software, data, energy, and
            infrastructure. This isn't just about market share, it's about who
            decides how billions of people learn, create and see the world.
          </p>
          <p>
            Today these tech giants are hoarding AI power, while AI slop takes
            over platforms we love. People want AI that empowers us to create
            and innovate, and that makes our lives and communities better. We’re
            excited about these possibilities. But too often we’re getting AI
            that watches and controls, or that puts users at risk.
          </p>
          <p><em>We accept this future at our peril.</em></p>
        </div>
      </div>
    </div>

    <div class="future-b space-y-2.5 lg:space-y-5">
      <div class="relative overflow-hidden pb-10 lg:pb-20">
        <Svg
          client:load
          src="/svg/dots.svg"
          class="absolute left-0 right-0 top-1/2 -translate-y-1/2 w-full object-cover"
        />
        <h2 class="font-tuoi-tre text-5xl lg:text-7xl">
          An internet built on human agency and choice
        </h2>
      </div>
      <div class="grid lg:grid-cols-2 gap-2.5 lg:gap-5">
        <div class="lg:col-start-2 space-y-2.5 lg:space-y-5">
          <p>Imagine it’s 2030.</p>
          <p>
            You wake up and your digital world feels different — familiar, but
            freer. The tools you use don’t watch you; they work for you. AI
            agents collaborate, not control. The web is alive again — open,
            creative, participatory — a space where people and ideas, not
            monopolies, shape what comes next.
          </p>
          <p>
            AI isn’t something that happens to you anymore. It’s something you
            shape — in your work, your community, your daily life. Independent
            creators are thriving. Local entrepreneurs and small nonprofits are
            using open-source models to build solutions that actually fit their
            needs. Students are learning with AI that reflects their culture and
            language. Researchers are collaborating across borders on systems
            that are transparent, ethical, and free.
          </p>
          <p>
            Twenty-five years ago, Mozilla and a global community rewrote the
            rules of the internet. Together, we proved that an open,
            values-driven approach to technology could win — not just morally,
            but in the marketplace. We can do it again for AI.
          </p>
          <p>
            <em>
              This is not a fantasy. It’s the future we can have, if we build it
              together.
            </em>
          </p>
        </div>
      </div>
    </div>
  </section>

  <ProgressWatcher
    client:load
    current="stakes"
    number="one"
    position="first"
    next="code"
    text="> Make a choice to unlock stamp..."
  />

  <ProgressCard client:load full={false} />
</Layout>

<style>
  /* Default state: content hidden */
  .future-a,
  .future-b,
  .future-section {
    display: none;
  }

  /* When A is selected */
  html.stakes-a .future-toggle-a {
    background-color: #000;
    color: var(--color-yellow);
  }
  html.stakes-a .future-a,
  html.stakes-a .future-section {
    display: block;
  }

  /* When B is selected */
  html.stakes-b .future-toggle-b {
    background-color: #000;
    color: var(--color-yellow);
  }
  html.stakes-b .future-b,
  html.stakes-b .future-section {
    display: block;
  }
</style>

<script is:inline>
  // Handle click events for A/B selection
  document.addEventListener("click", function (event) {
    var toggleElement = event.target.closest(".future-toggle");
    if (!toggleElement) return;

    var selection = toggleElement.dataset.selection;
    if (!selection) return;

    var html = document.documentElement;
    var currentClass = "stakes-" + selection;
    var isActive = html.classList.contains(currentClass);

    // Remove both classes first
    html.classList.remove("stakes-a", "stakes-b");

    if (isActive) {
      // Deselect - remove from localStorage
      localStorage.removeItem("stakesSelection");
    } else {
      // Select - add class and save to localStorage
      html.classList.add(currentClass);
      localStorage.setItem("stakesSelection", selection);
    }
  });
</script>
