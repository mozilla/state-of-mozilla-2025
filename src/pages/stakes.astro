---
import Layout from "../layouts/Layout.astro";
import Captcha from "../components/Captcha.svelte";
import StakesSvg from "../components/svg/StakesSvg.svelte";
import ProgressWatcher from "../components/ProgressWatcher.svelte";
import ProgressCard from "../components/ProgressCard.svelte";
---

<Layout>
  <Captcha client:load />

  <section
    class="relative p-2.5 lg:p-5 min-h-[calc(100svh-var(--header-height)-20px)] bg-yellow"
  >
    <img class="absolute bottom-0 left-0 right-0" src="/dots-big.png" />
    <div
      class="absolute max-lg:w-1/2 right-0 lg:right-5 max-lg:bottom-2.5 lg:top-1/2 lg:-translate-y-full"
    >
      <StakesSvg />
    </div>
    <p class="mb-2.5 lg:mb-5">I - The Stakes</p>
    <h1 class="font-tuoi-tre text-7xl lg:text-9xl">
      Which future will
      <br class="max-lg:hidden" />
      you choose?
    </h1>
  </section>

  <section class="p-2.5 lg:p-5">
    <div class="grid lg:grid-cols-4 gap-2.5 lg:gap-5">
      <div class="lg:col-span-2 lg:col-start-2 space-y-2.5 lg:space-y-5">
        <p>
          AI isn't just another tech trend. It's become the internet's core
          operating system - the beating heart of most apps, tools and
          technology we use today.
        </p>
        <p>
          We're gaining incredible capabilities: natural language interaction
          with computers, automation of mundane tasks, creative collaboration
          tools, and accessibility breakthroughs that were impossible just years
          ago.
        </p><p>
          But as much promise as these innovations hold, we're at a crossroads.
          Will this technology benefit everyone? Or will it be exploited and
          centrally controlled through monopolization? Will AI be great, and
          give us the delightful and transformational experiences we're hoping
          for? Or will it be a terrible, extractive or even dangerous pile of
          slop?
        </p>
        <p>It's up to us to decide.</p>
      </div>
    </div>
  </section>

  <section class="p-2.5 lg:p-5">
    <div class="marquee bg-black text-white text-xl mb-5 -mx-2.5 lg:-mx-5">
      <ul class="marquee__content">
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
      </ul>
      <ul aria-hidden="true" class="marquee__content">
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
        <li>DO NOT ACCEPT DEFAULT SETTINGS</li>
      </ul>
    </div>
    <p class="text-center mb-2.5 lg:mb-5 border-y border-black py-2.5">
      TWO FUTURES
    </p>
    <div class="grid grid-cols-2 lg:gap-2.5">
      <div class="space-y-2.5 lg:space-y-5">
        <button
          data-target=".future-a"
          class="future-toggle aspect-square w-full flex justify-center items-center outline outline-dashed bg-yellow cursor-pointer hover:bg-black hover:text-yellow"
        >
          <span class="text-9xl">A</span>
        </button>
        <div class="future-a hidden space-y-2.5 lg:space-y-5">
          <p class="border-y border-black py-2.5">CLOSED AND EXTRACTIVE</p>
          <p>
            Monopolies, concentration, and slop. A future where a few
            corporations decide how billions of people learn, create, and see
            the world.
          </p>
          <div>
            <div class="aspect-square w-full bg-gray-500"></div>
            <p>CLOSED AND EXTRACTIVE</p>
          </div>
        </div>
      </div>
      <div class="space-y-2.5 lg:space-y-5">
        <button
          data-target=".future-b"
          class="future-toggle aspect-square w-full flex justify-center items-center outline outline-dashed bg-yellow cursor-pointer hover:bg-black hover:text-yellow"
        >
          <span class="text-9xl">B</span>
        </button>
        <div class="future-b hidden space-y-2.5 lg:space-y-5">
          <p class="border-y border-black py-2.5">OPEN AND HUMAN-FIRST</p>
          <p>
            An internet built on human agency and choice. Technology that
            empowers creativity, protects privacy, and benefits everyone.
          </p>
          <div>
            <div class="aspect-square w-full bg-gray-500"></div>
            <p>OPEN AND HUMAN-FIRST</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="future-a future-b hidden p-2.5 lg:p-5 space-y-5 space-y-10">
    <div class="future-a hidden space-y-2.5 lg:space-y-5">
      <div class="pb-10 lg:pb-20">
        <h2 class="font-tuoi-tre text-5xl lg:text-7xl">
          Monopolies, concentration, and slop.
        </h2>
      </div>
      <div class="grid lg:grid-cols-2 gap-2.5 lg:gap-5">
        <div class="lg:col-start-1 space-y-2.5 lg:space-y-5">
          <p>
            Twenty five years ago, when Microsoft controlled 95% of browsers,
            they controlled how people accessed information, who could build
            what, and on what terms.
          </p>
          <p>
            Mozilla was born to end that stranglehold, challenging other
            browsers dominance and shocking the world when we won the fight to
            guard the open nature of the internet. That remains our north star
            today.
          </p>
          <p>
            But today's AI concentration is far more insidious. Right now, Open
            AI, Google, Meta, Amazon, Microsoft and Apple are vying for control
            of the full stack that will underpin our shared future - hardware,
            software, data, energy, and infrastructure.
          </p>
          <p>
            This isn't just about market share, it's about who gets to decide
            how billions of people learn, create and see the world.
          </p>
          <p>
            Today these tech giants are hoarding AI power, while AI slop takes
            over platforms we love. People want AI that empowers us to create
            and innovate, and that makes our lives and communities better. We're
            excited about these tools. But too often we're getting AI that
            watches and controls, or that puts users at risk.
          </p>
        </div>
      </div>
    </div>

    <div class="future-b hidden space-y-2.5 lg:space-y-5">
      <div class="pb-10 lg:pb-20">
        <h2 class="font-tuoi-tre text-5xl lg:text-7xl">
          An internet built on human agency and choice
        </h2>
      </div>
      <div class="grid lg:grid-cols-2 gap-2.5 lg:gap-5">
        <div class="lg:col-start-2 space-y-2.5 lg:space-y-5">
          <p>
            What if developers, activists, researchers, founders and investors
            joined forces to build something different? What if we proved that a
            different economic model could win? It wasn't just idealism that
            broke Microsoft's stranglehold over the web - it was innovation;
            experimentation; participation; and a rebel alliance of programmers,
            developers, activists, investors and coders who built something new,
            together.
          </p>
          <p>
            Moving towards our north star in the current era means we need to do
            for AI what we did for the web - decentralizing control, harnessing
            a global community committed to a better internet, and building
            great products that give people real agency and choice. To do this,
            Mozilla is transforming itself for a new era, by investing in a
            portfolio of mission driven organizations and companies that show it
            is possible to build great technology and live your values, and to
            make open source the norm.
          </p>
          <p>
            Mozilla has shown for over 20 years that a different economic model
            for tech can succeed. Now we're getting even more ambitious and
            rigorous, using a double bottom line approach to build a whole
            ecosystem of responsible tech companies.
          </p>
          <p>
            Mozilla is currently investing in a portfolio of companies that are
            focused on both mission and money. This includes efforts to build
            and invest in AI that reflects Mozilla's values, as well as major
            investments in transforming Firefox and Thunderbird.
          </p>
          <p>
            Collectively, these companies have what's needed to create a
            counterpoint to Big Tech's winner-take-all approach - and represent
            a shared ambition to decentralize the tech industry so
            human-centered AI can flourish.
          </p>
        </div>
      </div>
    </div>

    <ProgressWatcher client:load current="stakes" />
  </section>

  <section class="m-0">
    <div class="bg-black text-yellow py-2.5 px-2.5 lg:px-5">
      <p>END OF:// CHAPTER_ONE</p>
    </div>
    <div
      class="bg-yellow px-2.5 pt-2.5 lg:px-5 lg:pt-5 pb-20 lg:pb-40 space-y-2.5"
    >
      <div class="grid lg:grid-cols-2 gap-2.5">
        <div>
          <p>:: CONGRATS! :: FIRST #STAMP# REWARD AFFIRMATIVE</p>
        </div>
        <div>
          <a class="flex flex-col gap-px" href="/code">
            <div
              class="relative overflow-hidden px-2.5 pt-2.5 pb-20 space-y-2.5 outline outline-dashed outline-black bg-black text-white"
            >
              <img
                class="absolute bottom-0 left-0 right-0 w-full h-1/2 object-cover object-top"
                src="/dots.png"
              />
              <p class="uppercase">Go to next chapter</p>
              <h3 class="font-workbench text-7xl uppercase">Code</h3>
            </div>
            <div
              class="outline outline-dashed outline-black bg-black text-white p-2.5"
            >
              PROCEED â†’
            </div>
          </a>
        </div>
      </div>
    </div>
  </section>

  <ProgressCard client:load />
</Layout>

<script is:inline>
  // Use event delegation on document - works even when content loads dynamically
  document.addEventListener("click", function (event) {
    var toggleElement = event.target.closest(".future-toggle");
    if (!toggleElement) return;

    var target = toggleElement.dataset.target;
    if (!target) return;

    // Get all toggle buttons and content sections
    var allToggles = document.querySelectorAll(".future-toggle");
    var allContents = document.querySelectorAll(".future-a, .future-b");

    // Check if this toggle is already active
    var isActive = toggleElement.classList.contains("bg-black");

    if (isActive) {
      // If clicking the active tab, deactivate it
      toggleElement.classList.remove("bg-black", "text-yellow");
      toggleElement.classList.add("bg-yellow");
      document.querySelectorAll(target).forEach(function (item) {
        item.classList.add("hidden");
      });
    } else {
      // Deactivate all toggles
      allToggles.forEach(function (toggle) {
        toggle.classList.remove("bg-black", "text-yellow");
        toggle.classList.add("bg-yellow");
      });

      // Hide all content
      allContents.forEach(function (content) {
        content.classList.add("hidden");
      });

      // Activate clicked toggle
      toggleElement.classList.remove("bg-yellow");
      toggleElement.classList.add("bg-black", "text-yellow");

      // Show target content
      document.querySelectorAll(target).forEach(function (item) {
        item.classList.remove("hidden");
      });
    }
  });
</script>
